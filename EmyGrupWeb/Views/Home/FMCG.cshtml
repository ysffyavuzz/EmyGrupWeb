@{
    ViewData["Title"] = "FMCG";
}
@inject Microsoft.Extensions.Localization.IStringLocalizer<SharedResource> L

<section class="spacer-section">
    <div class="container py-5">

        <!-- Başlık -->
        <div class="text-center mb-5">
            <h2 class="fmcg-title">
                @L["Fmcg_Urunlerimiz"]
            </h2>
            <div class="fmcg-title-line"></div>
        </div>

        <!-- FMCG GRID -->
        <div class="fmcg-grid">

            <!-- 1 -->
            <div class="fmcg-item"><img src="/images/FMCG/P&G.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/UNILEVER.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/COLGATE PALMOLIVE.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/NIVEA.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/HENKEL.png" /></div>

            <!-- 2 -->
            <div class="fmcg-item"><img src="/images/FMCG/LOREAL.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/JOHNSON & JOHNSON.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/RECKITT BENCKISER.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/SLEEPY.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/ECZACIBAŞI.png" /></div>

            <!-- 3 -->
            <div class="fmcg-item"><img src="/images/FMCG/EVYAP.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/HAYAT KİMYA.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/ABC.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/NESTLE.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/MILKA.png" /></div>

            <!-- 4 -->
            <div class="fmcg-item"><img src="/images/FMCG/RED BULL.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/HARIBO.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/ALGIDA.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/FERRERO.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/KINDER.png" /></div>

            <!-- 5 -->
            <div class="fmcg-item"><img src="/images/FMCG/MONDELEZ.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/PEPSICO.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/FRITO LAY.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/BARILLA.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/KELLOG'S.png" /></div>

            <!-- 6 -->
            <div class="fmcg-item"><img src="/images/FMCG/DANONE.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/VIVIDENT.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/LİPTON.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/KRAFT HEINZ.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/DR. OETKER.png" /></div>

            <!-- 7 -->
            <div class="fmcg-item"><img src="/images/FMCG/MONSTER.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/BEBETO.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/ÜLKER.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/ETİ.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/KENT.png" /></div>

            <!-- 8 -->
            <div class="fmcg-item"><img src="/images/FMCG/KURUKAHVECİ MEHMET EFENDİ.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/FİLİZ.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/TADIM.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/KAHVE DÜNYASI.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/ŞÖLEN.png" /></div>

            <!-- 9 -->
            <div class="fmcg-item"><img src="/images/FMCG/TORKU.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/ELVAN.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/KOSKA.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/TAT.png" /></div>
            <div class="fmcg-item"><img src="/images/FMCG/PEYMAN.png" /></div>

        </div>
    </div>
</section>

<style>
    /* Navbar’dan aşağıda başlasın */
    .spacer-section {
        margin-top: 120px;
    }

    @@media (max-width: 768px) {
        .spacer-section {
            margin-top: 90px;
        }
    }

    /* Başlık */
    .fmcg-title {
        font-size: 2.4rem;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 3px;
        font-family: 'Helvetica Neue', 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(180deg, #2b2b2b 0%, #000 100%);
        -webkit-background-clip: text;
        color: transparent;
        filter: drop-shadow(0 2px 5px rgba(0,0,0,0.15));
        margin-bottom: 14px;
        opacity: 0;
        transform: translateY(10px);
        animation: fmcgTitleIn .65s ease forwards;
    }

    .fmcg-title-line {
        width: 260px;
        height: 3px;
        margin: 0 auto;
        border-radius: 8px;
        background: linear-gradient(90deg, rgba(0,0,0,0), rgba(0,0,0,0.55), rgba(0,0,0,0));
        opacity: 0.45;
        transform: scaleX(.85);
        opacity: 0;
        animation: fmcgLineIn .75s ease forwards;
        animation-delay: .1s;
        transform-origin: center;
    }

    @@keyframes fmcgTitleIn {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @@keyframes fmcgLineIn {
        to {
            opacity: .45;
            transform: scaleX(1);
        }
    }

    /* GRID */
    .fmcg-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 32px;
    }

    /* Kart */
    .fmcg-item {
        background: #fff;
        border-radius: 20px;
        aspect-ratio: 1 / 1;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 8px 22px rgba(0,0,0,0.08);
        border: 1px solid rgba(0,0,0,0.06);
        position: relative;
        overflow: hidden;
        /* giriş/çıkış state */
        opacity: 0;
        transform: translate3d(-14px, 10px, 0) scale(0.985);
        filter: blur(1.2px);
        will-change: transform, opacity, filter;
        /* animasyon: delay JS’den gelir */
        transition: opacity .55s ease var(--d, 0ms), transform .55s cubic-bezier(.2,.8,.2,1) var(--d, 0ms), filter .55s ease var(--d, 0ms), box-shadow .25s ease, border-color .25s ease;
    }

        /* görünür olunca */
        .fmcg-item.is-visible {
            opacity: 1;
            transform: translate3d(0,0,0) scale(1);
            filter: blur(0);
        }

        /* Hover */
        .fmcg-item:hover {
            transform: translate3d(0,-5px,0) scale(1.01);
            box-shadow: 0 14px 30px rgba(0,0,0,0.14);
            border-color: rgba(0,0,0,0.12);
        }

        /* Hover sheen */
        .fmcg-item::after {
            content: "";
            position: absolute;
            top: -40%;
            left: -60%;
            width: 60%;
            height: 180%;
            transform: rotate(18deg);
            background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.55) 50%, rgba(255,255,255,0) 100% );
            opacity: 0;
            transition: opacity .25s ease, left .65s ease;
            pointer-events: none;
        }

        .fmcg-item:hover::after {
            opacity: 0.55;
            left: 120%;
        }

        .fmcg-item img {
            max-width: 70%;
            max-height: 70%;
            object-fit: contain;
            user-select: none;
            filter: saturate(1.02) contrast(1.02);
            transition: transform .25s ease;
        }

        .fmcg-item:hover img {
            transform: scale(1.03);
        }

    /* Responsive */
    @@media (max-width: 1200px) {
        .fmcg-grid {
            grid-template-columns: repeat(4, 1fr);
        }
    }

    @@media (max-width: 992px) {
        .fmcg-grid {
            grid-template-columns: repeat(3, 1fr);
        }
    }

    @@media (max-width: 576px) {
        .fmcg-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    /* Reduce motion */
    @@media (prefers-reduced-motion: reduce) {
        .fmcg-title, .fmcg-title-line {
            animation: none;
            opacity: 1;
            transform: none;
        }

        .fmcg-item {
            opacity: 1;
            transform: none;
            filter: none;
            transition: none;
        }

            .fmcg-item::after {
                display: none;
            }

            .fmcg-item img {
                transition: none;
            }
    }
</style>

<script>
    (function () {
        const grid = document.querySelector(".fmcg-grid");
        const items = Array.from(document.querySelectorAll(".fmcg-item"));
        if (!grid || items.length === 0) return;

        // Kolon sayısını anlık ölç: responsive bozulmadan row/col delay hesaplayacağız
        function getColumnCount() {
            const cs = window.getComputedStyle(grid);
            const cols = cs.gridTemplateColumns.split(" ").filter(Boolean);
            return Math.max(1, cols.length);
        }

        // Soldan sağa (row-by-row) gecikme ver
        function applyStaggerDelays() {
            const colCount = getColumnCount();

            // Kurumsal/abartısız değerler
            const colStep = 55;   // soldan sağa aralık
            const rowStep = 70;   // bir sonraki satırın başlangıç gecikmesi
            const maxDelay = 900; // aşırı uzamasın

            items.forEach((el, i) => {
                const row = Math.floor(i / colCount);
                const col = i % colCount;
                const delay = Math.min(row * rowStep + col * colStep, maxDelay);
                el.style.setProperty("--d", delay + "ms");
            });
        }

        applyStaggerDelays();

        // Resize olunca kolon sayısı değişebilir → delayleri güncelle
        let resizeT;
        window.addEventListener("resize", () => {
            clearTimeout(resizeT);
            resizeT = setTimeout(applyStaggerDelays, 120);
        });

        // Kartın ufak bir kısmı görünse bile başlasın:
        // threshold 0 + rootMargin ile biraz erken tetikle
        const io = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add("is-visible");
                } else {
                    // Yukarı çıkınca / ekrandan çıkınca geri kaybolsun
                    entry.target.classList.remove("is-visible");
                }
            });
        }, {
            threshold: 0,
            rootMargin: "80px 0px 80px 0px"
        });

        items.forEach(el => io.observe(el));
    })();
</script>
